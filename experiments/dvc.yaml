stages:
  train:
    cmd: python ../run_experiment.py --verbose --train --root_path ../../ --model_path model.pt
    deps:
      - ../run_experiment.py
    params:
      - features.collate_resize
      - features.number_of_channels
      - features.sampling_rate
      - features.waveform_normalization.scope
      - features.waveform_normalization.type
      - train.batch_size
      - train.dataset
      - train.learning_rate
      - train.nepochs
      - train.random_seed
      - train.train_percent
      - train.stopping_criteria
      - train.patience
      - train.augmentation
      - train.pretrained
      - train.balanced
    outs:
      - model.pt
      - index_to_name.json
    metrics:
      - dvclive/metrics.json:
          cache: false
    plots:
      - dvclive/plots:
          cache: false
  evaluate:
    cmd: python ../run_experiment.py --verbose --evaluate --root_path ../../ --model_path model.pt
    deps:
      - ../run_experiment.py
      - model.pt
      - index_to_name.json
    params:
      - features.collate_resize
      - features.number_of_channels
      - features.sampling_rate
      - features.waveform_normalization.scope
      - features.waveform_normalization.type
      - evaluate.dataset
    outs:
      - classification_table.csv
      - classification_report.csv
